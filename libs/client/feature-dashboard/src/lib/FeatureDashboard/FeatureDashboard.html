<!--
  Feature Dashboard Template
  
  This template displays todo items in a two-column layout:
  - Left column: Incomplete todos
  - Right column: Completed todos
  
  Template Features:
  - Uses async pipe to handle Observable subscription automatically
  - Separates todos by completion status using *ngIf
  - Uses trackBy function for performance optimization
  - Binds component outputs to event handlers
  - Semantic HTML with proper ARIA landmarks
  - Theme toggle for user preference
  
  Angular Template Syntax:
  - *ngIf with async pipe: Waits for data and assigns to local variable
  - *ngFor: Iterates over the todos array
  - trackBy: Optimizes rendering by tracking items by ID
  - [todo]: Property binding to pass data to child component
  - (toggleComplete): Event binding to handle component output
  - $event: Special variable containing the emitted value
-->

<header class="dashboard-header" role="banner">
  <h1 class="dashboard-header__title">Todo Dashboard</h1>
  <fst-theme-toggle></fst-theme-toggle>
</header>

<section class="page" *ngIf="todos$ | async as todos" role="main" aria-label="Todo items">
  <!-- Incomplete Todos Column -->
  <section class="incomplete-column" aria-labelledby="incomplete-heading">
    <h2 id="incomplete-heading" class="column-heading">Incomplete</h2>
    <div class="todo-list" role="list">
      <ng-container *ngFor="let todo of todos; trackBy: trackTodo">
        <article 
          *ngIf="!todo.completed"
          role="listitem"
          [attr.aria-labelledby]="'todo-title-' + todo.id">
          <fst-todo
            [todo]="todo"
            (toggleComplete)="toggleComplete($event)"
            (deleteTodo)="deleteTodo($event)"
            (editTodo)="editTodo($event)"
          ></fst-todo>
        </article>
      </ng-container>
    </div>
  </section>

  <!-- Completed Todos Column -->
  <section class="complete-column" aria-labelledby="completed-heading">
    <h2 id="completed-heading" class="column-heading">Completed</h2>
    <div class="todo-list" role="list">
      <ng-container *ngFor="let todo of todos; trackBy: trackTodo">
        <article 
          *ngIf="todo.completed"
          role="listitem"
          [attr.aria-labelledby]="'todo-title-' + todo.id">
          <fst-todo
            [todo]="todo"
            (toggleComplete)="toggleComplete($event)"
            (deleteTodo)="deleteTodo($event)"
            (editTodo)="editTodo($event)"
          ></fst-todo>
        </article>
      </ng-container>
    </div>
  </section>
</section>

<!-- Edit Todo Dialog -->
<fst-edit-todo-dialog
  [todo]="editingTodo"
  [visible]="isEditDialogVisible"
  (save)="onSaveEdit($event)"
  (cancel)="onCancelEdit()"
></fst-edit-todo-dialog>
